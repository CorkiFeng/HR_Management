<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport"
          content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no"/>
    <title>添加用户</title>
    <!--		<link rel="stylesheet" type="text/css" href="../../static/admin/layui/css/layui.css"/>-->
    <link rel="stylesheet" type="text/css" href="../../static/admin/css/admin.css"
          th:href="@{/static/admin/css/admin.css}"/>
    <link rel="stylesheet" href="../../static/admin/layui2.0/css/layui.css"
          th:href="@{/static/admin/layui2.0/css/layui.css}">
</head>
<body>
<div class="layui-tab page-content-wrap">
    <ul class="layui-tab-title">
        <li class="layui-this">添加员工</li>
    </ul>
    <div class="layui-tab-content">
        <div class="layui-tab-item layui-show">
            <form id="add_form" onsubmit="return false" action="#" method="post" class="layui-form" style="width: 90%;padding-top: 20px;">

                <div class="layui-form-item">

                    <label class="layui-form-label">部门：</label>
                    <div class="layui-inline">
                        <select name="deptId" lay-filter="dept">
                            <option value="">请选择部门</option>
							<option  th:value="${deptss.did}" th:each="deptss:${deptss}">[[${deptss.dname}]]</option>
                        </select>
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">职位：</label>
                    <div class="layui-inline">
                        <select name="jobId" lay-filter="job">
                            <option value="">请选择职位</option>
							<option  th:value="${jobss.jid}" th:each="jobss:${jobss}">[[${jobss.jname}]]</option>
                        </select>
                    </div>
                </div>

                <div class="layui-form-item">
                    <label class="layui-form-label">学历：</label>
                    <div class="layui-inline">
                        <select name="education" lay-filter="education">
                            <option value="">请选择学历</option>
                            <option value="本科">本科</option>
                            <option value="大专">带专</option>
                        </select>
                    </div>
                </div>

                <div class="layui-form-item">
                    <label class="layui-form-label">性别：</label>
                    <div class="layui-inline">
                        <select name="sex" lay-filter="sex">
                            <option value="">请选择性别</option>
                            <option value="1">男</option>
                            <option value="2">女</option>
                        </select>
                    </div>
                </div>


                <div class="layui-form-item">
                    <label class="layui-form-label">政治面貌：</label>
                    <div class="layui-inline">
                        <select name="party" lay-filter="party">
                            <option value="">请选择政治面貌</option>
                            <option value="1">党员</option>
                            <option value="2">团员</option>
                            <option value="3">群众</option>
                        </select>
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">出生日期：</label>
                    <div class="layui-inline">
                        <input name="birthday" type="date" class="layui-input" id="test1">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">工资：</label>
                    <div class="layui-inline">
                        <input name="race" type="text" class="layui-input">
                    </div>
                </div>


                <div class="layui-form-item">
                    <label class="layui-form-label">姓名：</label>
                    <div class="layui-input-block">
                        <input type="text" name="name" required lay-verify="required" autocomplete="off"
                               class="layui-input" value="">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">卡号：</label>
                    <div class="layui-input-block">
                        <input type="text" name="cardId" required lay-verify="required" autocomplete="off"
                               class="layui-input" value="">
                    </div>
                </div>

                <hr class="layui-bg-green">

                <div class="layui-form-item">
                    <label class="layui-form-label">常住地址：</label>
                    <div class="layui-input-block">
                        <input type="text" name="address" required lay-verify="required" autocomplete="off"
                               class="layui-input" value="">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">邮政编码：</label>
                    <div class="layui-input-block">
                        <input type="text" name="postCode" required lay-verify="required" autocomplete="off"
                               class="layui-input" value="">
                    </div>
                </div>

                <hr class="layui-bg-green">

                <div class="layui-form-item">
                    <label class="layui-form-label">固定电话：</label>
                    <div class="layui-input-block">
                        <input type="text" name="tel" required lay-verify="required" autocomplete="off"
                               class="layui-input" value="">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">手机号码：</label>
                    <div class="layui-input-block">
                        <input type="text" id="phone" name="phone" required lay-verify="required" autocomplete="off"
                               class="layui-input" value="">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">qq：</label>
                    <div class="layui-input-block">
                        <input type="text" name="qqNum" required lay-verify="required" autocomplete="off"
                               class="layui-input" value="">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">电子邮箱：</label>
                    <div class="layui-input-block">
                        <input type="email" name="email" required lay-verify="required" autocomplete="off"
                               class="layui-input" value="">
                    </div>
                </div>

                <hr class="layui-bg-green">


                <div class="layui-form-item">
                    <label class="layui-form-label">特长：</label>
                    <div class="layui-input-block">
                        <input type="text" name="speciality" required lay-verify="required" autocomplete="off"
                               class="layui-input" value="">
                    </div>
                </div>

                <div class="layui-form-item">
                    <label class="layui-form-label">爱好：</label>
                    <div class="layui-input-block">
                        <input type="text" name="hobby" required lay-verify="required" autocomplete="off"
                               class="layui-input" value="">
                    </div>
                </div>

                <div class="layui-form-item layui-form-text">
                    <label class="layui-form-label">备注：</label>
                    <div class="layui-input-block">
                        <textarea name="remark" placeholder="请输入内容" class="layui-textarea"></textarea>
                    </div>
                </div>
                <div class="layui-form-item">
                    <div class="layui-input-block">
                        <button type="submit" onclick="AddEmployee();" class="layui-btn layui-btn-normal">立即提交</button>
                    </div>
                </div>
            </form>
        </div>

        </form>
    </div>
</div>
</div>
<script src="../../static/admin/js/jquery-3.5.1.js" th:src="@{/static/admin/js/jquery-3.5.1.js}"></script>
<script src="../../static/admin/layui2.0/layui.all.js" th:src="@{/static/admin/layui2.0/layui.all.js}"></script>
<script src="../static/admin/js/jquery-3.5.1.js" th:src="@{/static/admin/js/jquery-3.5.1.js}"></script>
<!--	<script src="../../static/admin/layui/layui.js" type="text/javascript" charset="utf-8"></script>-->
<script>
    //Demo
    layui.use(['form', 'element', 'laydate'], function () {
        var form = layui.form;
        var element = layui.element;
        var laydate = layui.laydate;
        form.render();
        //监听信息提交
        // form.on('submit(adminInfo)', function(data){
        //   layer.msg(JSON.stringify(data.field));
        //   return false;
        // });
        // //监听密码提交
        //  form.on('submit(adminPassword)', function(data){
        //   layer.msg(JSON.stringify(data.field));
        //   return false;
        // });
        // laydate.render({
        // 	elem: '#test1' //指定元素
        // });
    });

    var regNumber = /^[1-9]+[0-9]*]*$/;

    function AddEmployee() {
        var phone = $("#phone").val();
        if (!regNumber.test(phone) || phone.length != 11) {
            alert("手机号码输入有误");
            return false;
        }
        $.ajax({
            url: "add_employee",
            type: "POST",
            dataType: "json",
            data: $('#add_form').serialize(),
            success: function (data) {
                if (data == 1) {
                    alert("添加成功");
                    top.location.href = "index.html";
                } else if(data == -1) {
                    alert("添加失败，该用户已注册");
                }else{
                    alert("添加失败");
                }
            }
        });
    }

</script>
</body>
</html>
